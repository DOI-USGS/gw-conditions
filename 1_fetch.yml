target_default: 1_fetch

packages:
  - dataRetrieval
  - dplyr

sources:
  - 1_fetch/src/fetch_s3.R
  - 1_fetch/src/fetch_nwis.R

targets:

  1_fetch:
    depends:
      - 1_fetch/out/gw_data.csv

##-- Historic GW sites and data --##

  1_fetch/out/historic_gw_site_info.rds:
    command: fetch_s3(target_name, historic_site_info_s3_fn)
  1_fetch/out/historic_gw_data.csv:
    command: fetch_s3(target_name, historic_data_s3_fn)
  1_fetch/out/historic_gw_quantiles.csv:
    command: fetch_s3(target_name, historic_quantiles_s3_fn)

##-- GW sites and data for current viz time period --##
  
  gw_sites:
    command: fetch_gw_sites(viz_start_date, viz_end_date, viz_bounding_box, gw_param_cd)
  gw_site_info:
    command: fetch_gw_site_info(gw_sites)
  1_fetch/out/gw_data.csv:
    command: fetch_gw_data(target_name, gw_sites, viz_start_date, viz_end_date, gw_param_cd, stat_cd = I("00003"), 200)
